var ilabMediaS3Uploader=function(a,b,c){this.start=function(){var d={action:"ilab_upload_prepare",filename:c.name};a.post(ajaxurl,d,function(d){if(console.log(d),"ready"==d.status){b.updateStatusText("Uploading ...");var e=new FormData;_.each(Object.keys(d.formData),function(a){"key"!=a&&e.append(a,d.formData[a])}),null!=d.cacheControl&&0<d.cacheControl.length&&e.append("Cache-Control",d.cacheControl),null!=d.expires&&e.append("Expires",d.expires);var f=c.type;"application/x-photoshop"==f&&(f="image/psd"),e.append("Content-Type",f),e.append("acl",d.acl),e.append("key",d.key),e.append("file",c),a.ajax({url:d.url,method:"POST",contentType:!1,processData:!1,data:e,xhr:function(){var c=a.ajaxSettings.xhr();return c.upload.onprogress=function(a){b.updateProgress(a.loaded/a.total)},c},success:function(){var c={action:"ilab_upload_import_cloud_file",key:d.key};a.post(ajaxurl,c,function(a){console.log(a),b.itemUploaded("success"==a.status,a)})},error:function(){b.itemUploadError()}})}else b.itemUploadError()})}};ilabMediaUploadItem.prototype.storageUploader=ilabMediaS3Uploader;
//# sourceMappingURL=ilab-media-upload-s3.js.map
